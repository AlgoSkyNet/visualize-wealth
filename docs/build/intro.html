<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Modules Explained &mdash; Visualize Wealth 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Visualize Wealth 0.0.1 documentation" href="index.html" />
    <link rel="next" title="README.md" href="readme.html" />
    <link rel="prev" title="Be the Change" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="readme.html" title="README.md"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Be the Change"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Visualize Wealth 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Modules Explained</a><ul>
<li><a class="reference internal" href="#constructing-portfolios">Constructing portfolios</a></li>
<li><a class="reference internal" href="#analyzing-portfolio-performance">Analyzing portfolio performance</a></li>
<li><a class="reference internal" href="#construct-portfolio-py-documentation"><tt class="docutils literal"><span class="pre">construct_portfolio.py</span></tt> documentation</a></li>
<li><a class="reference internal" href="#asset-class-py-documentation"><tt class="docutils literal"><span class="pre">asset_class.py</span></tt> documentation</a></li>
<li><a class="reference internal" href="#analyze-py-documentation"><tt class="docutils literal"><span class="pre">analyze.py</span></tt> documentation</a></li>
<li><a class="reference internal" href="#utils-py-documentation"><tt class="docutils literal"><span class="pre">utils.py</span></tt> documentation</a></li>
<li><a class="reference internal" href="#sphinx-customizations">Sphinx Customizations</a><ul>
<li><a class="reference internal" href="#convert-readme-md-to-rst-format">Convert <cite>README.md</cite> to <cite>.rst</cite> format</a></li>
<li><a class="reference internal" href="#build-sphinx-documentation">Build Sphinx Documentation</a></li>
<li><a class="reference internal" href="#sphinx-customizations-in-conf-py">Sphinx Customizations in <tt class="docutils literal"><span class="pre">conf.py</span></tt></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Be the Change</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="readme.html"
                        title="next chapter">README.md</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/intro.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="modules-explained">
<span id="intro"></span><h1>Modules Explained<a class="headerlink" href="#modules-explained" title="Permalink to this headline">¶</a></h1>
<p><strong>Optimization of Functions:</strong></p>
<p>In all cases, functions have been optimized to ensure the most
expeditious calculation times possible, so most of the lag time the
user experiences will be due to the <tt class="docutils literal"><span class="pre">Yahoo!</span></tt> API Calls.</p>
<p><strong>Examples:</strong></p>
<p>Fairly comprehensive examples can be found in the <tt class="docutils literal"><span class="pre">README</span></tt> section
of this documentation, which also resides on the <a class="reference external" href="http://www.github.com/benjaminmgross/wealth-viz">Splash Page</a> of this
project&#8217;s GitHub Repository.</p>
<p><strong>Testing</strong>:</p>
<p>The folder under <tt class="docutils literal"><span class="pre">visualize_wealth/tests/</span></tt> has fairly significant
tests that illustrate the calculations of:</p>
<ol class="arabic simple">
<li>Portoflio construction methods</li>
<li>The portfolio statistic calculations use in the <tt class="xref py py-mod docutils literal"><span class="pre">analyze</span></tt> module</li>
</ol>
<p>All the files are Microsoft Excel files (extensions <cite>.xslx</cite>), so
seeing cell calculations and the steps to arrive at a final value
should be pretty straightforward.</p>
<div class="section" id="constructing-portfolios">
<span id="id1"></span><h2>Constructing portfolios<a class="headerlink" href="#constructing-portfolios" title="Permalink to this headline">¶</a></h2>
<p>In general I&#8217;ve provided for three ways to construct a portfolio using
this package:</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt><strong>The Blotter Method:</strong> Provide trades given tickers, buy / sell</dt>
<dd><p class="first last">dates, and prices.  In general, this method most closely approximates
how you would reconstruct your own portfolio performance (if you had
to).  You would essentially take trade confirmations of buys and
sells, calcluate dividends and splits, and then arrive at an
aggregate  portfolio path.  Specific examples can be found under
<a class="reference external" href="./readme.html#the-blotter-method">blotter method examples</a>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>The Weight Allocation Method:</strong> Provide a weighting scheme with</dt>
<dd><p class="first last">dates along the first column with column titles as tickers and
percentage allocations to each ticker for a given date for values.
Specific examples can be found under
<a class="reference external" href="./readme.html#the-weight-allocation-method">weight allocation examples</a>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>The Initial Allocation Method:</strong> with specific Rebalancing</dt>
<dd><p class="first last">Periods provide an initial allocation scheme representing the
static weights to rebalance to at some given interval, and then
define the rebalancing interval as  &#8216;weekly&#8217;,   &#8216;monthly&#8217;,
&#8216;quarterly&#8217;, and &#8216;yearly.&#8217; Specific examples can found under
<a class="reference external" href="./readme.html#the-initial-allocation-rebalancing-method">initial allocation examples</a>.</p>
</dd>
</dl>
</li>
</ol>
<p>Much more detailed examples of these three methods, as well as
specific examples of code that would leverage this package can be
found in the <a class="reference external" href="./readme.html#portfolio-construction-examples">Portfolio Construction Examples</a>.</p>
<p>In the cases where prices are not available to the investor, helper
functions for all of the construction methods are available that use
<a class="reference external" href="http://www.finance.yahoo.com">Yahoo!&#8217;s API</a> to pull down relevant
price series to be incorporated into the portfolio series calculation.</p>
</div>
<div class="section" id="analyzing-portfolio-performance">
<span id="id2"></span><h2>Analyzing portfolio performance<a class="headerlink" href="#analyzing-portfolio-performance" title="Permalink to this headline">¶</a></h2>
<p>In general, there&#8217;s a myriad of statistics and analysis that
can be done to analyze portfolio performance.  I don&#8217;t go really
deeply into the uses of any of these statistics, but any number of
them can be &#8220;Google-ed&#8221;, if there aren&#8217;t live links already provided.</p>
<p>Fairly extensive formulas are provided for each of the performance statistics
inside of the <tt class="xref py py-mod docutils literal"><span class="pre">analyze</span></tt>.  Formulas were inserted using the
<a class="reference external" href="http://www.mathjax.org/">MathJax</a> rendering capability that <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a> provides.</p>
</div>
<div class="section" id="construct-portfolio-py-documentation">
<span id="construct-portfolio-documentation"></span><h2><tt class="docutils literal"><span class="pre">construct_portfolio.py</span></tt> documentation<a class="headerlink" href="#construct-portfolio-py-documentation" title="Permalink to this headline">¶</a></h2>
<p>Full documentation for each of the functions of <tt class="xref py py-mod docutils literal"><span class="pre">construct-portfolio</span></tt></p>
<span class="target" id="module-visualize_wealth.construct_portfolio"></span><span class="target" id="module-construct_portfolio.py"></span><dl class="function">
<dt id="visualize_wealth.construct_portfolio.append_price_frame_with_dividends">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">append_price_frame_with_dividends</tt><big>(</big><em>ticker</em>, <em>start_date</em>, <em>end_date=None</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#append_price_frame_with_dividends"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.append_price_frame_with_dividends" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a ticker, start_date, &amp; end_date, return a <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with 
a Dividend Columns appended to it</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">ticker: <tt class="xref py py-meth docutils literal"><span class="pre">str()</span></tt> of ticker</p>
<p>start_date: <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt></a> or string of format &#8220;mm/dd/yyyy&#8221;</p>
<p>end_date: a <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt></a> or string of format &#8220;mm/dd/yyyy&#8221;</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">price_df: a <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with columns [&#8216;Close&#8217;, &#8216;Adj Close&#8217;,
&#8216;Dividends&#8217;]</p>
</td>
</tr>
</tbody>
</table>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">frame_with_divs</span> <span class="o">=</span> <span class="n">construct_portfolio</span><span class="o">.</span><span class="n">append_price_frame_with_dividends</span><span class="p">(</span><span class="s">&#39;EEM&#39;</span><span class="p">,</span> 
<span class="s">&#39;01/01/2000&#39;</span><span class="p">,</span> <span class="s">&#39;01/01/2013&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Requires Internet Connectivity</p>
<p class="last">Because the function calls the <a class="reference external" href="http://www.finance.yahoo.com">Yahoo! API</a>
internet connectivity is required for the function to work properly</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.blotter_and_price_df_to_cum_shares">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">blotter_and_price_df_to_cum_shares</tt><big>(</big><em>blotter_df</em>, <em>price_df</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#blotter_and_price_df_to_cum_shares"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.blotter_and_price_df_to_cum_shares" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a blotter <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of dates, purchases (+/-),  and 
price <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with Close Adj Close, Dividends, &amp; Splits, 
calculate the cumulative share balance for the position</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">blotter_df: a  <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> where index is buy/sell dates</p>
<p>price_df: a <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with columns [&#8216;Close&#8217;, &#8216;Adj Close&#8217;, 
&#8216;Dividends&#8217;, &#8216;Splits&#8217;]</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> containing contributions, withdrawals, price
values</p>
</td>
</tr>
</tbody>
</table>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">agg_stats_for_single_asset</span><span class="o">=</span><span class="n">construct_portfolio</span><span class="o">.</span><span class="n">blotter_to_split_adj_shares</span><span class="p">(</span>
    <span class="n">single_asset_blotter</span><span class="p">,</span> <span class="n">split_adj_price_frame</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating Position Value</p>
<p class="last">The sole reason you can&#8217;t take the number of trades for a given asset, 
apply a <tt class="xref py py-meth docutils literal"><span class="pre">cumsum()</span></tt>, and then multiply by &#8216;Close&#8217; for a given day is 
because of splits.  Therefore, once this function has run, taking the 
cumulative shares and then multiplying by close <strong>is</strong> an appropriate way
to determine aggregate position value for any given day</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.blotter_to_cum_shares">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">blotter_to_cum_shares</tt><big>(</big><em>blotter_series</em>, <em>ticker</em>, <em>start_date</em>, <em>end_date</em>, <em>tol</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#blotter_to_cum_shares"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.blotter_to_cum_shares" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregation function for <tt class="xref py py-meth docutils literal"><span class="pre">append_price_frame_with_dividend()</span></tt>, :meth:`
calculate_splits`, and <tt class="xref py py-meth docutils literal"><span class="pre">blotter_and_price_df_to_cum_shares()</span></tt>.  Only a
blotter,  ticker, start_date, &amp; end_date are needed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">blotter_series: a  <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> with index of dates and values of
quantity</p>
<p>ticker: class:<cite>str</cite> the ticker for which the buys and sells occurs</p>
<p>start_date: a <tt class="xref py py-class docutils literal"><span class="pre">string</span></tt> or <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt></a></p>
<p>end_date: <tt class="xref py py-class docutils literal"><span class="pre">string</span></tt> or <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt></a></p>
<p>tol: <tt class="xref py py-class docutils literal"><span class="pre">float</span></tt>  the tolerance to find the split dates (.1 recommended)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> containing contributions, withdrawals, price 
values</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Requires Internet Connectivity</p>
</div>
<p>Because the function calls the <a class="reference external" href="http://www.finance.yahoo.com">Yahoo! API</a>
internet connectivity is required for the function to work properly</p>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.calculate_splits">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">calculate_splits</tt><big>(</big><em>price_df</em>, <em>tol=0.1</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#calculate_splits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.calculate_splits" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a <tt class="docutils literal"><span class="pre">price_df</span></tt> of the format <tt class="xref py py-meth docutils literal"><span class="pre">append_price_frame_with_dividends()</span></tt>, 
return a <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with a split factor columns named &#8216;Splits&#8217;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">price_df: a <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with columns [&#8216;Close&#8217;, &#8216;Adj Close&#8217;,
&#8216;Dividends&#8217;]</p>
<p>tol: class:<cite>float</cite> of the tolerance to determine whether a split has
occurred</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">price: <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with columns [&#8216;Close&#8217;, &#8216;Adj Close&#8217;,
&#8216;Dividends&#8217;, Splits&#8217;]</p>
</td>
</tr>
</tbody>
</table>
<div class="code highlight-python"><div class="highlight"><pre><span class="n">price_df_with_divs_and_split_ratios</span> <span class="o">=</span> <span class="n">construct_portfolio</span><span class="o">.</span><span class="n">calculate_splits</span><span class="p">(</span>
    <span class="n">price_df_with_divs</span><span class="p">,</span> <span class="n">tol</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating Splits</p>
<p class="last">This function specifically looks at the ratios of close to adjusted close to
determine whether a split has occurred. To see the manual calculations of 
this function, see <tt class="docutils literal"><span class="pre">visualize_wealth/tests/estimating</span> <span class="pre">when</span> <span class="pre">splits</span> <span class="pre">have</span>
<span class="pre">occurred.xlsx</span></tt></p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.construct_random_trades">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">construct_random_trades</tt><big>(</big><em>split_df</em>, <em>num_trades</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#construct_random_trades"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.construct_random_trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Create random trades on random trade dates, but never allow shares to go negative</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">split_df: <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> that has &#8216;Close&#8217;, &#8216;Dividends&#8217;, &#8216;Splits&#8217;</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><dl class="first last docutils">
<dt>blotter_frame: <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> a blotter with random trades,</dt>
<dd><p class="first last">num_trades</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Why Create Random Trades?</p>
<p class="last">One disappointing aspect of any type of financial software is the fact that
you <strong>need</strong> to have a portfolio to view what the software does (which
never seemed like an appropriate &#8220;necessary&#8221; condition to me).  Therefore,
I&#8217;ve created comprehensive ability to create random trades for single assets,
as well as random portfolios of assets, to avoid the &#8220;unnecessary condition&#8221;
of having a portfolio to understand how to anaylze one.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.fetch_data_for_initial_allocation_method">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">fetch_data_for_initial_allocation_method</tt><big>(</big><em>initial_weights</em>, <em>start_date='01/01/2000'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#fetch_data_for_initial_allocation_method"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.fetch_data_for_initial_allocation_method" title="Permalink to this definition">¶</a></dt>
<dd><p>To be used with <a class="reference external" href="./readme.html#the-initial-allocation-rebalancing-method">The Initial Allocaiton Method</a> Given initial_weights
<tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> with index of tickers and values of initial allocation 
percentages, fetch the data using Yahoo!&#8217;s API and return a panel of dimensions
[tickers, dates, price data], where <tt class="docutils literal"><span class="pre">price_data</span></tt> has columns <tt class="docutils literal"><span class="pre">['Open',</span> 
<span class="pre">'Close','Adj</span> <span class="pre">Close'].</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">initial_weights <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> with tickers as index and weights as
values</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first"><tt class="xref py py-class docutils literal"><span class="pre">pandas.Panel</span></tt> where:</p>
<blockquote class="last">
<div><ul class="simple">
<li><tt class="xref py py-meth docutils literal"><span class="pre">panel.items()</span></tt> are tickers</li>
<li><tt class="xref py py-meth docutils literal"><span class="pre">panel.major_axis()</span></tt> dates</li>
<li><tt class="xref py py-meth docutils literal"><span class="pre">panel.minor_axis()</span></tt> price information, specifically: 
[&#8216;Open&#8217;, &#8216;Close&#8217;, &#8216;Adj Close&#8217;]</li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.fetch_data_for_weight_allocation_method">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">fetch_data_for_weight_allocation_method</tt><big>(</big><em>weight_df</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#fetch_data_for_weight_allocation_method"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.fetch_data_for_weight_allocation_method" title="Permalink to this definition">¶</a></dt>
<dd><p>To be used with <cite>The Weight Allocation Method 
&lt;./readme.html#the-weight-allocation-method&gt;_</cite> Given a weight_df
with index of allocation dates and columns of percentage
allocations, fetch the data using Yahoo!&#8217;s API and return a panel of dimensions
[tickers, dates, price data], where <tt class="docutils literal"><span class="pre">price_data</span></tt> has columns <tt class="docutils literal"><span class="pre">['Open',</span> 
<span class="pre">'Close','Adj</span> <span class="pre">Close'].</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><dl class="first docutils">
<dt>weight_df: a <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with dates as index and tickers as</dt>
<dd><p class="first last">columns</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first"><tt class="xref py py-class docutils literal"><span class="pre">pandas.Panel</span></tt> where:</p>
<blockquote class="last">
<div><ul>
<li><p class="first"><tt class="xref py py-meth docutils literal"><span class="pre">panel.items()</span></tt> are tickers</p>
</li>
<li><p class="first"><tt class="xref py py-meth docutils literal"><span class="pre">panel.major_axis()</span></tt> dates</p>
</li>
<li><dl class="first docutils">
<dt><tt class="xref py py-meth docutils literal"><span class="pre">panel.minor_axis:()</span></tt> price information, specifically: </dt>
<dd><p class="first last">[&#8216;Open&#8217;, &#8216;Close&#8217;, &#8216;Adj Close&#8217;]</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Requires Internet Connectivity</p>
</div>
<p>Because the function calls the <a class="reference external" href="http://www.finance.yahoo.com">Yahoo! API</a>
internet connectivity is required for the function to work properly</p>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.format_blotter">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">format_blotter</tt><big>(</big><em>blotter_file</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#format_blotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.format_blotter" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass in either a location of a blotter file (in <tt class="docutils literal"><span class="pre">.csv</span></tt> format) or blotter 
<tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with all positive values and return a
<tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> where Sell values are then negative values</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">blotter_file: <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with at least index (dates of 
Buy / Sell) columns = [&#8216;Buy/Sell&#8217;, &#8216;Shares&#8217;] or a string of the file
location to such a formatted file</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body">blotter: of type <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> where sell values have been made 
negative</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.generate_random_asset_path">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">generate_random_asset_path</tt><big>(</big><em>ticker</em>, <em>start_date</em>, <em>num_trades</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#generate_random_asset_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.generate_random_asset_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows the user to input a ticker, start date, and num_trades to generate 
a <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with columns &#8216;Open&#8217;, &#8216;Close&#8217;, cum_withdrawals&#8217;, 
&#8216;cum_shares&#8217; (i.e. bypasses the need for a price <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> 
to  generate an asset path, as is required in <tt class="xref py py-meth docutils literal"><span class="pre">construct_random_trades()</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">ticker: <tt class="xref py py-class docutils literal"><span class="pre">string</span></tt> of the ticker to generate the path</p>
<p>start_date: <tt class="xref py py-class docutils literal"><span class="pre">string</span></tt> of format &#8216;mm/dd/yyyy&#8217; or <tt class="xref py py-class docutils literal"><span class="pre">datetime</span></tt></p>
<p>num_trades: <tt class="xref py py-class docutils literal"><span class="pre">int</span></tt> of the number of trades to generate</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><dl class="first last docutils">
<dt><tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with the additional columns &#8216;cum_shares&#8217;, </dt>
<dd><p class="first last">&#8216;contr_withdrawal&#8217;, &#8216;Splits&#8217;, Dividends&#8217;</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Requires Internet Connectivity</p>
</div>
<p>Because the function calls the <a class="reference external" href="http://www.finance.yahoo.com">Yahoo! API</a>
internet connectivity is required for the function to work properly</p>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.generate_random_portfolio_blotter">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">generate_random_portfolio_blotter</tt><big>(</big><em>tickers</em>, <em>num_trades</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#generate_random_portfolio_blotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.generate_random_portfolio_blotter" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="xref py py-meth docutils literal"><span class="pre">construct_random_asset_path()</span></tt>, for multiple assets, given a list of
tickers and a number of trades (to be used for all tickers). Execution prices
will be the &#8216;Close&#8217; of that ticker in the price DataFrame that is collected</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">tickers: a <tt class="xref py py-class docutils literal"><span class="pre">list</span></tt> with the tickers to be used</p>
<p>num_trades: <tt class="xref py py-class docutils literal"><span class="pre">integer</span></tt>, the number of trades to randomly generate for
each ticker</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with columns &#8216;Ticker&#8217;, &#8216;Buy/Sell&#8217; (+ for buys, - 
for sells) and &#8216;Price&#8217;</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Requires Internet Connectivity</p>
</div>
<p>Because the function calls the <a class="reference external" href="http://www.finance.yahoo.com">Yahoo! API</a>
internet connectivity is required for the function to work properly</p>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.panel_from_blotter">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">panel_from_blotter</tt><big>(</big><em>blotter_df</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#panel_from_blotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.panel_from_blotter" title="Permalink to this definition">¶</a></dt>
<dd><p>The aggregation function to construct a portfolio given a blotter of tickers,
trades, and number of shares.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><dl class="first docutils">
<dt>agg_blotter_df: a <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with columns [&#8216;Ticker&#8217;,</dt>
<dd><dl class="first last docutils">
<dt>&#8216;Buy/Sell&#8217;, &#8216;Price&#8217;],  where the &#8216;Buy/Sell&#8217; column is the quantity of</dt>
<dd><p class="first last">shares, (+) for buy, (-) for sell</p>
</dd>
</dl>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">pandas.Panel</span></tt> with dimensions [tickers, dates, price data]</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>What to Do with your Panel</p>
<p class="last">The <tt class="xref py py-class docutils literal"><span class="pre">pandas.Panel</span></tt> returned by this function has all of the necessary
information to do some fairly exhaustive analysis.  Cumulative investment,
portfolio value (simply the <tt class="docutils literal"><span class="pre">cum_shares``*``close</span></tt> for all assets), closes,
opens, etc.  You&#8217;ve got a world of information about &#8220;your portfolio&#8221; with
this object... get diggin!</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.panel_from_initial_weights">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">panel_from_initial_weights</tt><big>(</big><em>weight_series</em>, <em>price_panel</em>, <em>rebal_frequency</em>, <em>start_value=1000</em>, <em>start_date=None</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#panel_from_initial_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.panel_from_initial_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a pandas.DataFrame with columns [&#8216;Close&#8217;, &#8216;Open&#8217;] when provided
a pandas.Series of intial weight allocations, the date of those initial weight 
allocations (series.name), a starting value of the index, and a rebalance  
frequency (this is the classical &#8220;static&#8221; construction&#8221; methodology, rebalancing
at somspecified interval)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">weight_series of <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of a weight allocation with an 
index of tickers, and a name of the initial allocation</p>
<p>price_panel of type <tt class="xref py py-class docutils literal"><span class="pre">pandas.Panel</span></tt> with dimensions [tickers, index,
price data]</p>
<p>start_value: of type <tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> of the value to start the index</p>
<p>rebal_frequency: <tt class="xref py py-class docutils literal"><span class="pre">string</span></tt> of &#8216;weekly&#8217;, &#8216;monthly&#8217;, &#8216;quarterly&#8217;,
&#8216;yearly&#8217;</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">price: of type <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with portfolio &#8216;Close&#8217; and &#8216;Open&#8217;</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.panel_from_weight_file">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">panel_from_weight_file</tt><big>(</big><em>weight_df</em>, <em>price_panel</em>, <em>start_value</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#panel_from_weight_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.panel_from_weight_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <tt class="xref py py-class docutils literal"><span class="pre">pandas.Panel</span></tt> with columns [&#8216;Close&#8217;, &#8216;Open&#8217;] when provided
a pandas.DataFrame of weight allocations and a starting  value of the index</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">weight_df of <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of a weight allocation with tickers 
for columns, index of dates and weight allocations to each of the tickers</p>
<dl class="docutils">
<dt>price_panel of <tt class="xref py py-class docutils literal"><span class="pre">pandas.Panel</span></tt> with dimensions [tickers, index, price</dt>
<dd><p class="first last">data]</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">pandas.Panel</span></tt> with dimensions (tickers, dates, price data)</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>What to Do with your Panel</p>
<p class="last">The <tt class="xref py py-class docutils literal"><span class="pre">pandas.Panel</span></tt> returned by this function has all of the necessary
information to do some fairly exhaustive analysis.  Cumulative investment,
portfolio value (simply the <tt class="docutils literal"><span class="pre">cum_shares``*``close</span></tt> for all assets), closes,
opens, etc.  You&#8217;ve got a world of information about &#8220;your portfolio&#8221; with
this object... get diggin!</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.pfp_from_blotter">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">pfp_from_blotter</tt><big>(</big><em>panel_from_blotter</em>, <em>start_value=1000.0</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#pfp_from_blotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.pfp_from_blotter" title="Permalink to this definition">¶</a></dt>
<dd><p>pfp stands for &#8220;Portfolio from Panel&#8221;, so this takes the final
:class`pandas.Panel` that is created in the portfolio construction process 
when a blotter is given and generates a portfolio path of &#8216;Open&#8217; and &#8216;Close&#8217;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><blockquote class="first">
<div><p>panel_from_blotter: a <tt class="xref py py-class docutils literal"><span class="pre">pandas.Panel</span></tt> that was generated using
ref:<cite>panel_from_weight_file</cite></p>
</div></blockquote>
<p>start_value: <tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> of the starting value, defaults to 1000.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">portfolio prices in a <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with columns [&#8216;Open&#8217;, 
&#8216;Close&#8217;]</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The Holy Grail of the Portfolio Path</p>
<p class="last">The portfolio path is what goes into all of the <tt class="xref py py-mod docutils literal"><span class="pre">analyze</span></tt> 
functions.  So once the <cite>pfp_from_</cite>... has been created, you&#8217;ve got all 
of the necessary bits to begin calculating performance metrics on your 
portfolio!</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Another way to think of Portfolio Path</p>
<p class="last">This &#8220;Portfolio Path&#8221; is really nothing more than a series of prices that, 
should you have made the trades given in the blotter, would have been the 
the experience of someone investing <cite>start_value</cite> in your strategy when 
your strategy first begins, up until today.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.pfp_from_weight_file">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">pfp_from_weight_file</tt><big>(</big><em>panel_from_weight_file</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#pfp_from_weight_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.pfp_from_weight_file" title="Permalink to this definition">¶</a></dt>
<dd><p>pfp stands for &#8220;Portfolio from Panel&#8221;, so this takes the final <tt class="docutils literal"><span class="pre">pandas.Panel</span></tt>
that is created in the portfolio construction process when weight file is given
and generates a portfolio path of &#8216;Open&#8217; and &#8216;Close&#8217;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">panel_from_weight_file: a <tt class="xref py py-class docutils literal"><span class="pre">pandas.Panel</span></tt> that was generated using
<tt class="docutils literal"><span class="pre">panel_from_weight_file</span></tt></td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body">portfolio prices in a <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with columns [&#8216;Open&#8217;, 
&#8216;Close&#8217;]</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The Holy Grail of the Portfolio Path</p>
<p class="last">The portfolio path is what goes into all of the <tt class="xref py py-mod docutils literal"><span class="pre">analyze</span></tt> 
functions.  So once the <cite>pfp_from_</cite>... has been created, you&#8217;ve got all 
of the necessary bits to begin calculating performance metrics on your 
portfolio!</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Another way to think of Portfolio Path</p>
<p class="last">This &#8220;Portfolio Path&#8221; is really nothing more than a series of prices that, 
should you have made the trades given in the blotter, would have been the 
the experience of someone investing <cite>start_value</cite> in your strategy when 
your strategy first begins, up until today.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.construct_portfolio.test_funs">
<tt class="descclassname">visualize_wealth.construct_portfolio.</tt><tt class="descname">test_funs</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/visualize_wealth/construct_portfolio.html#test_funs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.construct_portfolio.test_funs" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas.util.testing</span> <span class="kn">as</span> <span class="nn">put</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xl_file</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s">&#39;../tests/test_splits.xlsx&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blotter</span> <span class="o">=</span> <span class="n">xl_file</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;blotter&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Close&#39;</span><span class="p">,</span> <span class="s">&#39;Adj Close&#39;</span><span class="p">,</span> <span class="s">&#39;Dividends&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">price_df</span> <span class="o">=</span> <span class="n">xl_file</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;calc_sheet&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">price_df</span> <span class="o">=</span> <span class="n">price_df</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_frame</span> <span class="o">=</span> <span class="n">calculate_splits</span><span class="p">(</span><span class="n">price_df</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">shares_owned</span> <span class="o">=</span> <span class="n">blotter_and_price_df_to_cum_shares</span><span class="p">(</span><span class="n">blotter</span><span class="p">,</span> <span class="n">split_frame</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_vals</span> <span class="o">=</span> <span class="n">xl_file</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;share_balance&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)[</span><span class="s">&#39;cum_shares&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">put</span><span class="o">.</span><span class="n">assert_series_equal</span><span class="p">(</span><span class="n">shares_owned</span><span class="p">[</span><span class="s">&#39;cum_shares&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">test_vals</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">xl_file</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s">&#39;../tests/panel from weight file test.xlsx&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weight_df</span> <span class="o">=</span> <span class="n">xl_file</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;rebal_weights&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tickers</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;EEM&#39;</span><span class="p">,</span> <span class="s">&#39;EFA&#39;</span><span class="p">,</span> <span class="s">&#39;IYR&#39;</span><span class="p">,</span> <span class="s">&#39;IWV&#39;</span><span class="p">,</span> <span class="s">&#39;IEF&#39;</span><span class="p">,</span> <span class="s">&#39;IYR&#39;</span><span class="p">,</span> <span class="s">&#39;SHY&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">ticker</span> <span class="ow">in</span> <span class="n">tickers</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">d</span><span class="p">[</span><span class="n">ticker</span><span class="p">]</span> <span class="o">=</span> <span class="n">xl_file</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panel</span> <span class="o">=</span> <span class="n">panel_from_weight_file</span><span class="p">(</span><span class="n">weight_df</span><span class="p">,</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="mf">1000.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">portfolio</span> <span class="o">=</span> <span class="n">pfp_from_weight_file</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">manual_calcs</span> <span class="o">=</span> <span class="n">xl_file</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;index_result&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">put</span><span class="o">.</span><span class="n">assert_series_equal</span><span class="p">(</span><span class="n">manual_calcs</span><span class="p">[</span><span class="s">&#39;Close&#39;</span><span class="p">],</span> <span class="n">portfolio</span><span class="p">[</span><span class="s">&#39;Close&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="asset-class-py-documentation">
<span id="asset-class-documentation"></span><h2><tt class="docutils literal"><span class="pre">asset_class.py</span></tt> documentation<a class="headerlink" href="#asset-class-py-documentation" title="Permalink to this headline">¶</a></h2>
<p>Full documentation for each of the functions of <tt class="xref py py-mod docutils literal"><span class="pre">asset-class</span></tt></p>
<span class="target" id="module-visualize_wealth.asset_class"></span><span class="target" id="module-asset_class.py"></span><dl class="function">
<dt id="visualize_wealth.asset_class.asset_class_and_subclass_by_interval">
<tt class="descclassname">visualize_wealth.asset_class.</tt><tt class="descname">asset_class_and_subclass_by_interval</tt><big>(</big><em>series</em>, <em>interval</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/asset_class.html#asset_class_and_subclass_by_interval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.asset_class.asset_class_and_subclass_by_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregator function to determine the asset class for the entire 
period, followed by asset subclass over intervals of <tt class="docutils literal"><span class="pre">interval.</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of asset prices</p>
<p>interval: :class:string of the interval, currently only accepts 
<tt class="docutils literal"><span class="pre">quarterly</span></tt> or <tt class="docutils literal"><span class="pre">annual</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of the asset_subclasses over period 
interval</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In an effort to ensure spurious asset classes aren&#8217;t chosen (for 
instance, &#8216;US Equity&#8217; to be chosen for one quarter and then 
&#8216;Alternatives&#8217; to be chosen in a different quarter, simply 
because of   &#8220;similar asset performance&#8221;), the process of the 
algorithm is:</p>
<p>1. Determine the &#8220;Overall Asset Class&#8221; for the entire period of 
the asset&#8217;s returns</p>
<p class="last">2. Determine the subclass attributions over the rolling 
interval of time</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.asset_class.asset_class_dict">
<tt class="descclassname">visualize_wealth.asset_class.</tt><tt class="descname">asset_class_dict</tt><big>(</big><em>asset_class</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/asset_class.html#asset_class_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.asset_class.asset_class_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>All of the ticker and asset class information stored in dictionary 
form for use by other functions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">asset_class: <tt class="xref py py-class docutils literal"><span class="pre">string</span></tt> of <tt class="docutils literal"><span class="pre">US</span> <span class="pre">Equity</span></tt>, <tt class="docutils literal"><span class="pre">Foreign</span> <span class="pre">Equity</span></tt>,
<tt class="docutils literal"><span class="pre">Alternative</span></tt> or <tt class="docutils literal"><span class="pre">Fixed</span> <span class="pre">Income</span></tt>.</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body">:class:dict of the asset subclasses and respective tickers</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.asset_class.asset_subclass_by_interval">
<tt class="descclassname">visualize_wealth.asset_class.</tt><tt class="descname">asset_subclass_by_interval</tt><big>(</big><em>series</em>, <em>interval</em>, <em>asset_class</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/asset_class.html#asset_subclass_by_interval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.asset_class.asset_subclass_by_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Return asset sub class weightings that explain the asset returns 
over interval periods of &#8220;interval.&#8221;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">asset_prices: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the asset for which 
attribution will be done</p>
<p>asset_class_prices: <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of asset class 
prices</p>
<p>interval :class:string of the frequency interval &#8216;quarterly&#8217; 
or &#8216;annual&#8217;</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of proportions of each asset class 
that most explain the returns of the individual security</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.asset_class.best_fitting_weights">
<tt class="descclassname">visualize_wealth.asset_class.</tt><tt class="descname">best_fitting_weights</tt><big>(</big><em>series</em>, <em>asset_class_prices</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/asset_class.html#best_fitting_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.asset_class.best_fitting_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the best fitting weights given a <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of 
asset prices and a <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of asset class prices.  
Can be used with the <tt class="xref py py-func docutils literal"><span class="pre">clean_dates()</span></tt> function to ensure an 
intersection of the two indexes is being passed to the function</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">asset_prices: m x 1 <tt class="xref py py-class docutils literal"><span class="pre">pandas.TimeSeries</span></tt> of asset_prices</p>
<p>ac_prices: m x n <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> asset class (&#8220;ac&#8221;) 
prices</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">pandas.TimeSeries</span></tt> of nonnegative weights for each 
asset such that the r_squared from the regression of 
<span class="math">\(Y ~ Xw + e\)</span> is maximized</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.asset_class.clean_dates">
<tt class="descclassname">visualize_wealth.asset_class.</tt><tt class="descname">clean_dates</tt><big>(</big><em>arr_a</em>, <em>arr_b</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/asset_class.html#clean_dates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.asset_class.clean_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the intersection of two <tt class="xref py py-class docutils literal"><span class="pre">pandas</span></tt> objects, either a
<tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> or a <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">arr_a: <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt>
arr_b: <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt></td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><tt class="xref py py-class docutils literal"><span class="pre">pandas.DatetimeIndex</span></tt> of the intersection of the two 
<tt class="xref py py-class docutils literal"><span class="pre">pandas</span></tt> objects</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.asset_class.get_asset_and_subclasses">
<tt class="descclassname">visualize_wealth.asset_class.</tt><tt class="descname">get_asset_and_subclasses</tt><big>(</big><em>series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/asset_class.html#get_asset_and_subclasses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.asset_class.get_asset_and_subclasses" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregator function that returns the overall asset class, and 
proportion of subclasses attributed to the returns of <tt class="docutils literal"><span class="pre">series.</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of asset prices</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the subclasses and asset class for 
the entire time period</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.asset_class.get_asset_class">
<tt class="descclassname">visualize_wealth.asset_class.</tt><tt class="descname">get_asset_class</tt><big>(</big><em>series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/asset_class.html#get_asset_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.asset_class.get_asset_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Given as series of prices, find the most likely asset class of the 
asset, based on r-squared attribution of return variance (i.e. 
maximizing r-squared).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of asset prices</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Functionality for Asset Allocation Funds</p>
<p class="last">Current functionality only allows for a single asset class to 
be chosen in an effort not to overfit the attribution of asset 
returns.  This logic works well for &#8220;single asset class ETFs 
and Mutual Funds&#8221; but not for multi-asset class strategies</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.asset_class.get_sub_classes">
<tt class="descclassname">visualize_wealth.asset_class.</tt><tt class="descname">get_sub_classes</tt><big>(</big><em>series</em>, <em>asset_class</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/asset_class.html#get_sub_classes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.asset_class.get_sub_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an the prices of a single asset an its overall asset class, 
return the proportion of returns attribute to each asset class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of asset prices</p>
<p>asset_class: <tt class="xref py py-class docutils literal"><span class="pre">string</span></tt> of either <tt class="docutils literal"><span class="pre">US</span> <span class="pre">Equity</span></tt>, 
<tt class="docutils literal"><span class="pre">Foreign</span> <span class="pre">Equity</span></tt>, <tt class="docutils literal"><span class="pre">Alternative</span></tt>, or  <tt class="docutils literal"><span class="pre">Fixed</span> <span class="pre">Income</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of the subclasses and their 
optimized proportion to explain the <tt class="docutils literal"><span class="pre">series</span></tt> returns over 
the entire period.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="analyze-py-documentation">
<span id="analyze-documentation"></span><h2><tt class="docutils literal"><span class="pre">analyze.py</span></tt> documentation<a class="headerlink" href="#analyze-py-documentation" title="Permalink to this headline">¶</a></h2>
<p>Full documentation for each of the functions of <tt class="xref py py-mod docutils literal"><span class="pre">analyze</span></tt></p>
<span class="target" id="module-visualize_wealth.analyze"></span><span class="target" id="module-analyze.py"></span><dl class="function">
<dt id="visualize_wealth.analyze.active_returns">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">active_returns</tt><big>(</big><em>series</em>, <em>benchmark</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#active_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.active_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Active returns is defined as the compound difference between linear returns i.e.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices of the portfolio</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices of the benchmark</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of active returns</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Compound Linear Returns</p>
<blockquote>
<div>Linear returns are not simply subtracted, but rather the compound
difference is taken such that</div></blockquote>
<div class="last math">
\[r_a = (1 + r_p)/(1 + r_b) - 1\]</div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.alpha">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">alpha</tt><big>(</big><em>series</em>, <em>benchmark</em>, <em>freq='daily'</em>, <em>rfr=0.0</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#alpha"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.alpha" title="Permalink to this definition">¶</a></dt>
<dd><p>Alpha is defined as simply the geometric difference between the return of a 
portfolio and a benchmark, less the risk free rate or:</p>
<div class="math">
\[\begin{split}\alpha = \frac{(1 + R_p - r_f)}{(1 + R_b - r_f)}  - 1 \\\end{split}\]\[\textrm{where},\]\[\begin{split}    R_p &amp;= \textrm{Portfolio Annualized Return} \\
    R_b &amp;= \textrm{Benchmark Annualized Return} \\
    r_f &amp;= \textrm{Risk Free Rate}\end{split}\]</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.annualized_return">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">annualized_return</tt><big>(</big><em>series</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#annualized_return"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.annualized_return" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the annualized linear return of a series, i.e. the linear compounding
rate that would have been necessary, given the initial investment, to arrive at
the final value</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> <span class="pre">yearly</span></tt>    
indicating the frequency of the data <tt class="docutils literal"><span class="pre">default=</span></tt> daily</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">float</span></tt>: of the annualized linear return</p>
</td>
</tr>
</tbody>
</table>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">visualize_wealth.performance</span> <span class="kn">as</span> <span class="nn">vwp</span>

<span class="n">linear_return</span> <span class="o">=</span> <span class="n">vwp</span><span class="o">.</span><span class="n">annualized_return</span><span class="p">(</span><span class="n">price_series</span><span class="p">,</span> <span class="n">frequency</span> <span class="o">=</span> <span class="s">&#39;monthly&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.annualized_vol">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">annualized_vol</tt><big>(</big><em>series</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#annualized_vol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.annualized_vol" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the annlualized volatility of the log changes of the price series, by
calculating the volatility of the series, and then applying the square root of 
time rule</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> <span class="pre">yearly</span></tt>    
indicating the frequency of the data <tt class="docutils literal"><span class="pre">default=</span></tt> daily</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">float: of the annualized volatility</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Applying the Square root of time rule</p>
<div class="last math">
\[\sigma = \sigma_t \cdot \sqrt{k},\: \textrm{where},\]\[\begin{split}k &amp;= \textrm{Factor of annualization} \\
\sigma_t &amp;= \textrm{volatility of period log returns}\end{split}\]</div>
</div>
<div class="code highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">visualize_wealth.performance</span> <span class="kn">as</span> <span class="nn">vwp</span>

<span class="n">ann_vol</span> <span class="o">=</span> <span class="n">vwp</span><span class="o">.</span><span class="n">annualized_vol</span><span class="p">(</span><span class="n">price_series</span><span class="p">,</span> <span class="n">frequency</span> <span class="o">=</span> <span class="s">&#39;monthly&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.beta">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">beta</tt><big>(</big><em>series</em>, <em>benchmark</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#beta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.beta" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the sensitivity of one price series to a chosen benchmark:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of a benchmark to calculate the sensitivity</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">float: the sensitivity of the series to the benchmark</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating Beta</p>
<div class="last math">
\[\beta \triangleq \frac{\sigma_{s, b}}{\sigma^2_{b}},
\: \textrm{where},\]\[\begin{split}\sigma^2_{b} &amp;= \textrm{Variance of the Benchmark} \\
\sigma_{s, b} &amp;= \textrm{Covariance of the Series &amp; Benchmark}\end{split}\]</div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.consecutive">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">consecutive</tt><big>(</big><em>int_series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#consecutive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.consecutive" title="Permalink to this definition">¶</a></dt>
<dd><p>Array logic (no for loops) and fast method to determine the number of
consecutive ones given a <cite>pandas.Series</cite> of integers Derived from <a class="reference external" href="http://stackoverflow.com/questions/18196811/cumsum-reset-at-nan">Stack Overflow</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">int_series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of integers as 0s or 1s</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the consecutive ones</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.consecutive_downtick_performance">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">consecutive_downtick_performance</tt><big>(</big><em>series</em>, <em>benchmark</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#consecutive_downtick_performance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.consecutive_downtick_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a two column <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with columns <cite>[&#8216;outperformance&#8217;,
&#8216;num_downticks&#8217;]</cite> that shows the cumulative outperformance (in log returns) and
the <cite>num_upticks</cite> number of days the downtick lasted</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of asset prices</p>
<p>benchmark: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of prices to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of <tt class="docutils literal"><span class="pre">['outperformance','num_upticks']</span></tt>.
Outperformance is in log returns and <cite>num_downticks</cite> the number of
consecutive downticks for which the outperformance was generated</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.consecutive_downticks">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">consecutive_downticks</tt><big>(</big><em>series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#consecutive_downticks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.consecutive_downticks" title="Permalink to this definition">¶</a></dt>
<dd><p>Using the <tt class="xref py py-func docutils literal"><span class="pre">num_consecutive()</span></tt>, returns a <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the
consecutive downticks in the series greater than three downticks</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the asset prices</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the consecutive downticks of the series</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.consecutive_uptick_performance">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">consecutive_uptick_performance</tt><big>(</big><em>series</em>, <em>benchmark</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#consecutive_uptick_performance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.consecutive_uptick_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a two column <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> with columns <tt class="docutils literal"><span class="pre">['outperformance',</span>
<span class="pre">'num_upticks']</span></tt> that shows the cumulative outperformance (in log returns) and
the <tt class="docutils literal"><span class="pre">num_upticks</span></tt> number of days the uptick lasted</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of asset prices</p>
<p>benchmark: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of prices to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of <tt class="docutils literal"><span class="pre">['outperformance','num_upticks']</span></tt>.
Outperformance is in log returns and num_upticks the number of consecutive
upticks for which the outperformance was generated</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.consecutive_upticks">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">consecutive_upticks</tt><big>(</big><em>series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#consecutive_upticks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.consecutive_upticks" title="Permalink to this definition">¶</a></dt>
<dd><p>Using the <tt class="xref py py-func docutils literal"><span class="pre">num_consecutive()</span></tt>, returns a <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the
consecutive upticks in the series with greater than 3 consecutive upticks</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the asset prices</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the consecutive downticks of the series</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.cumulative_turnover">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">cumulative_turnover</tt><big>(</big><em>alloc_df</em>, <em>asset_wt_df</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#cumulative_turnover"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.cumulative_turnover" title="Permalink to this definition">¶</a></dt>
<dd><p>Provided an allocation frame (i.e. the weights to which the portfolio was 
rebalanced), and the historical asset weights,  return the cumulative turnover,
where turnover is defined below.  The first period is excluded of the
<tt class="docutils literal"><span class="pre">alloc_df</span></tt> is excluded as that represents the initial investment</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">alloc_df: <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of the the weighting allocation that was
provided to construct the portfolio</p>
<p>asset_wt_df: <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of the actual historical weights of
each asset</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">cumulative turnover</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Calcluating Turnover</p>
</div>
<p>Let <span class="math">\(\tau_j =\)</span> Single Period period turnover for period <span class="math">\(j\)</span>,
and assets <span class="math">\(i = 1,:2,:...:,n\)</span>, each whose respective portfolio weight is
represented by <span class="math">\(\omega_i\)</span>.</p>
<dl class="docutils">
<dt>Then the single period <span class="math">\(j\)</span> turnover for all assets <span class="math">\(1,..,n\)</span> can be</dt>
<dd>calculated as:</dd>
</dl>
<div class="math">
\[\tau_j = \frac{\sum_{i=1}^n|\omega_i - \omega_{i+1}|  }{2}\]</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.cvar_cf">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">cvar_cf</tt><big>(</big><em>series</em>, <em>p=0.01</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#cvar_cf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.cvar_cf" title="Permalink to this definition">¶</a></dt>
<dd><p>CVaR (Expected Shortfall), using the <a class="reference external" href="http://en.wikipedia.org/wiki/Cornish%E2%80%93Fisher_expansion">Cornish Fisher Approximation</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of the
asset prices</p>
<p>p: <tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> of the desired percentile, defaults to .01 or the 1% CVaR</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the CVaR</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.cvar_cf_ew">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">cvar_cf_ew</tt><big>(</big><em>series</em>, <em>p=0.01</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#cvar_cf_ew"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.cvar_cf_ew" title="Permalink to this definition">¶</a></dt>
<dd><p>CVaR (Expected Shortfall), using the <a class="reference external" href="http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1997178">Cornish Fisher Approximation</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of the
asset prices</p>
<p>p: <tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> of the desired percentile, defaults to .01 or the 1% CVaR</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the CVaR</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.cvar_median_np">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">cvar_median_np</tt><big>(</big><em>series</em>, <em>p</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#cvar_median_np"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.cvar_median_np" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-parametric CVaR or Expected Shortfall, solely based on the median  of
historical values (because the median will provide a more unbiased estimate)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of the
asset prices</p>
<p>p: <tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> of the desired percentile, defaults to .01 or the 1% CVaR</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the CVaR</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.cvar_mu_np">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">cvar_mu_np</tt><big>(</big><em>series</em>, <em>p</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#cvar_mu_np"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.cvar_mu_np" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-parametric CVaR or Expected Shortfall, solely based on the mean of
historical values</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of the
asset prices</p>
<p>p: <tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> of the desired percentile, defaults to .01 or the 1% CVaR</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the CVaR</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.cvar_norm">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">cvar_norm</tt><big>(</big><em>series</em>, <em>p=0.01</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#cvar_norm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.cvar_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>CVaR (Conditional Value at Risk), fitting the normal distribution to the
historical time series using</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of the
asset prices</p>
<p>p: <tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> of the desired percentile, defaults to .01 or the 1% CVaR</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the CVaR</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.downcapture">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">downcapture</tt><big>(</big><em>series</em>, <em>benchmark</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#downcapture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.downcapture" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the proportion of <tt class="docutils literal"><span class="pre">series</span></tt>&#8216;s cumulative negative returns to
<tt class="docutils literal"><span class="pre">benchmark</span></tt>&#8216;s cumulative  returns, given benchmark&#8217;s returns were negative in
that period</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">float</span></tt> of the downcapture of cumulative positive ret</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-data docutils literal"><span class="pre">median_downcapture(series,</span> <span class="pre">benchmark)</span></tt></p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.downside_deviation">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">downside_deviation</tt><big>(</big><em>series</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#downside_deviation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.downside_deviation" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the volatility of the returns that are less than zero</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series:<tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of frequency, either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> 
<span class="pre">yearly</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">float: of the downside standard deviation</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.generate_all_metrics">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">generate_all_metrics</tt><big>(</big><em>series</em>, <em>benchmark</em>, <em>freq='daily'</em>, <em>rfr=0.0</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#generate_all_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.generate_all_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>cumulative values of relevant statistics is calculated for the <tt class="docutils literal"><span class="pre">series</span></tt> and 
<tt class="docutils literal"><span class="pre">benchmark</span></tt> for a given <tt class="docutils literal"><span class="pre">frequency</span></tt> and risk free rate</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><dl class="first docutils">
<dt>series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> or <tt class="docutils literal"><span class="pre">Pandas.DataFrame</span></tt> of prices to compare</dt>
<dd><p class="first">against benchmark</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices to compare series against</p>
<dl class="last docutils">
<dt>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of the frequency of prices.  &#8216;daily&#8217;, &#8216;weekly&#8217;,</dt>
<dd><p class="first last">&#8216;monthly&#8217;, &#8216;quarterly&#8217;,&#8217;yearly&#8217;</p>
</dd>
</dl>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">pandas.DataFrame</span></tt> of columns [&#8216;series&#8217;,&#8217;benchmark&#8217;] with statistics 
(index) of [&#8216;annualized_return&#8217;, annualized_vol&#8217;,&#8217;sharpe&#8217;,&#8217;max DD&#8217;,&#8217;ulcer
index&#8217;,&#8217;beta&#8217;,&#8217;alpha&#8217;, &#8216;upcapture&#8217;,&#8217;downcapture&#8217;,&#8217;tracking error&#8217;]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.idiosyncratic_as_proportion">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">idiosyncratic_as_proportion</tt><big>(</big><em>series</em>, <em>benchmark</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#idiosyncratic_as_proportion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.idiosyncratic_as_proportion" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the idiosyncratic risk as proportion of total volatility</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of frequency, either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> 
<span class="pre">yearly</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">float</span></tt> between (0, 1) representing the proportion of  volatility
represented by idiosycratic risk</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.idiosyncratic_risk">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">idiosyncratic_risk</tt><big>(</big><em>series</em>, <em>benchmark</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#idiosyncratic_risk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.idiosyncratic_risk" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the idiosyncratic risk, i.e. unexplained variation between a price series
and a chosen benchmark</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of frequency, either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> <span class="pre">yearly</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">float: the idiosyncratic volatility (not variance)</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Additivity of an asset&#8217;s Variance</p>
<blockquote>
<div><p>An asset&#8217;s variance can be broken down into systematic risk, i.e. that 
proportion of risk that can be attributed to some benchmark or risk factor
and idiosyncratic risk, or the unexplained variation between the series and 
the chosen benchmark / factor.</p>
<p>Therefore, using the additivity of variances, we can calculate idiosyncratic
risk as follows:</p>
</div></blockquote>
<div class="last math">
\[\sigma^2_{\textrm{total}} = \sigma^2_{\beta} + \sigma^2_{\epsilon} +
\sigma^2_{\epsilon, \beta}, \: \textrm{where}, \]\[\begin{split}\sigma^2_{\beta} &amp;= \textrm{variance attributable to systematic risk}
\\
\sigma^2_{\epsilon} &amp;= \textrm{idiosyncratic risk} \\
\sigma^2_{\epsilon, \beta} &amp;= \textrm{covariance between idiosyncratic
and systematic risk, which by definition} = 0 \\\end{split}\]\[\Rightarrow \sigma_{\epsilon} = \sqrt{\sigma^2_{\beta} + 
\sigma^2_{\epsilon, \beta}}\]</div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.jensens_alpha">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">jensens_alpha</tt><big>(</big><em>series</em>, <em>benchmark</em>, <em>rfr=0.0</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#jensens_alpha"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.jensens_alpha" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <a class="reference external" href="http://en.wikipedia.org/wiki/Jensen's_alpha">Jensen&#8217;s Alpha</a> or 
the excess return based on the systematic risk of the <tt class="docutils literal"><span class="pre">series</span></tt> relative to
the <tt class="docutils literal"><span class="pre">benchmark</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of the prices to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
<p>rfr: <tt class="docutils literal"><span class="pre">float</span></tt> of the risk free rate</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of frequency, either daily, monthly, quarterly, or yearly</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">float</span></tt> representing the Jensen&#8217;s Alpha</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating Jensen&#8217;s Alpha</p>
<div class="last math">
\[\alpha_{\textrm{Jensen}} = r_p - \beta \cdot r_b 
\: \textrm{where}\]\[\begin{split}r_p &amp;= \textrm{annualized linear return of the portfolio} \\
\beta &amp;= \frac{\sigma_{s, b}}{\sigma^2_{b}} \\
r_b &amp;= \textrm{annualized linear return of the benchmark}\end{split}\]</div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.linear_returns">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">linear_returns</tt><big>(</big><em>series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#linear_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.linear_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a series of linear returns given a series of prices</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of linear returns</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating Linear Returns</p>
<div class="last math">
\[R_t = \frac{P_{t+1}}{P_t} - 1\]</div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.log_returns">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">log_returns</tt><big>(</big><em>series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#log_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.log_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a series of log returns given a series of prices where</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of log returns</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating Log Returns</p>
<div class="last math">
\[R_t = \log(\frac{P_{t+1}}{P_t})\]</div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.max_drawdown">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">max_drawdown</tt><big>(</big><em>series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#max_drawdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.max_drawdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the maximum drawdown, or the maximum peak to trough linear distance, as 
a positive drawdown value</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body">float: the maximum drawdown of the period, expressed as a positive number</td>
</tr>
</tbody>
</table>
<div class="code highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">visualize_wealth.performance</span> <span class="kn">as</span> <span class="nn">vwp</span>

<span class="n">max_dd</span> <span class="o">=</span> <span class="n">vwp</span><span class="o">.</span><span class="n">max_drawdown</span><span class="p">(</span><span class="n">price_series</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.mctr">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">mctr</tt><big>(</big><em>asset_df</em>, <em>portfolio_series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#mctr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.mctr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the marginal contribution for risk (&#8220;mctr&#8221;) 
for each of the assets that construct <tt class="docutils literal"><span class="pre">portfolio_df</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">asset_df: <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of asset prices</p>
<p>portfolio_series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the portfolio value that is 
consructed by <tt class="docutils literal"><span class="pre">asset_df</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">a <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of each of the asset&#8217;s marginal contribution to
risk</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating Marginal Contribution to Risk</p>
<p>If we define, <span class="math">\(MCR_i\)</span> to be the Marginal Contribution to Risk for 
asset <span class="math">\(i\)</span>, then,</p>
<div class="last math">
\[\begin{split}MCTR_i &amp;= \sigma_i \cdot \rho_{i, P} \\\end{split}\]\[\begin{split}\textrm{where, } \\\end{split}\]\[\begin{split}\sigma_i &amp;= \textrm{volatility of asset } i, \\
\rho_i &amp;= \textrm{correlation of asset } i
\textrm{ with the Portfolio}\end{split}\]</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Reference for Further Reading</p>
<p class="last">MSCI Barra did an extensive (and easy to read) white paper entitled 
<a class="reference external" href="http://bit.ly/1eGmxJG">Risk Contribution</a> that explicitly details 
the risk exposure calculation.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.mean_absolute_tracking_error">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">mean_absolute_tracking_error</tt><big>(</big><em>series</em>, <em>benchmark</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#mean_absolute_tracking_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.mean_absolute_tracking_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns Carol Alexander&#8217;s calculation for Mean Absolute Tracking Error
(&#8220;MATE&#8221;).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of frequency, either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> 
<span class="pre">yearly</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">float</span></tt> of the mean absolute tracking error</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Why Mean Absolute Tracking Error</p>
<p>One of the downfalls of 
<a class="reference external" href="http://en.wikipedia.org/wiki/Tracking_error">Tracking Error</a> (&#8220;TE&#8221;) is
that diverging price series that diverge at a constant rate <strong>may</strong> have low 
TE.  MATE addresses this issue.</p>
<div class="last math">
\[\sqrt{\frac{(T-1)}{T}\cdot \tau^2 + \bar{R}} \: \textrm{where}\]\[\begin{split}\tau &amp;= \textrm{Tracking Error} \\
\bar{R} &amp;= \textrm{mean of the active returns}\end{split}\]</div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.median_downcapture">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">median_downcapture</tt><big>(</big><em>series</em>, <em>benchmark</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#median_downcapture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.median_downcapture" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the median downcapture of a <tt class="docutils literal"><span class="pre">series</span></tt> of prices against a <tt class="docutils literal"><span class="pre">benchmark</span></tt> 
prices, given that the <tt class="docutils literal"><span class="pre">benchmark</span></tt> achieved negative returns in a given period</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">float</span></tt> of the median downcapture</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>About Downcapture</p>
<p class="last">Upcapture can be a difficult statistic to ensure validity.  As upcapture
is <span class="math">\(\frac{\sum{r_{\textrm{series}}}}{\sum{r_{b|r_i \geq 0}}}\)</span> or 
the median values (in this case), dividing by small numbers can have 
asymptotic effects to the overall value of this statistic.  Therefore, it&#8217;s 
good to do a &#8220;sanity check&#8221; between <tt class="docutils literal"><span class="pre">median_upcapture</span></tt> and <tt class="docutils literal"><span class="pre">upcapture</span></tt></p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.median_upcapture">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">median_upcapture</tt><big>(</big><em>series</em>, <em>benchmark</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#median_upcapture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.median_upcapture" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the median upcapture of a <tt class="docutils literal"><span class="pre">series</span></tt> of prices against a <tt class="docutils literal"><span class="pre">benchmark</span></tt> 
prices, given that the <tt class="docutils literal"><span class="pre">benchmark</span></tt> achieved positive returns in a given period</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">float: of the median upcapture</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>About Upcapture</p>
<p class="last">Upcapture can be a difficult statistic to ensure validity.  As upcapture
is <span class="math">\(\frac{\sum{r_{\textrm{series}}}}{\sum{r_{b|r_i \geq 0}}}\)</span> or 
the median values (in this case), dividing by small numbers can have 
asymptotic effects to the overall value of this statistic.  Therefore, it&#8217;s 
good to do a &#8220;sanity check&#8221; between <tt class="docutils literal"><span class="pre">median_upcapture</span></tt> and <tt class="docutils literal"><span class="pre">upcapture</span></tt></p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.r_squared">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">r_squared</tt><big>(</big><em>series</em>, <em>benchmark</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#r_squared"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.r_squared" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the R-Squared or <a class="reference external" href="http://en.wikipedia.org/wiki/Coefficient_of_determination">Coefficient of Determination</a> for a univariate
regression (does not adjust for more independent variables
<a href="#id8"><span class="problematic" id="id9">:seealso:`r_squared_adjusted`</span></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: :class`pandas.Series` of prices</p>
<p>benchmark: :class`pandas.Series` of prices to regress <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">float: of the coefficient of variation</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.r_squared_adjusted">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">r_squared_adjusted</tt><big>(</big><em>series</em>, <em>benchmark</em>, <em>weights</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#r_squared_adjusted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.r_squared_adjusted" title="Permalink to this definition">¶</a></dt>
<dd><p>The Adjusted R-Squared that incorporates the number of independent variates
using the <cite>Formula Found of Wikipedia
&lt;http://en.wikipedia.org/wiki/Coefficient_of_determination#Adjusted_R2&gt;_</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of asset prices</p>
<p>benchmark: <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of benchmark prices to explain the
returns of the <tt class="docutils literal"><span class="pre">series</span></tt></p>
<p>weights: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of weights to weight each column of the
benchmark</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">:class:float of the adjusted r-squared`</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.return_by_year">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">return_by_year</tt><big>(</big><em>series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#return_by_year"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.return_by_year" title="Permalink to this definition">¶</a></dt>
<dd><p>the annualized returns for each of the years</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><tt class="docutils literal"><span class="pre">pandas.Series</span></tt> where <tt class="docutils literal"><span class="pre">index</span> <span class="pre">is</span> <span class="pre">years</span> <span class="pre">and</span> <span class="pre">``values</span></tt> are linear 
annual returns for that year</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.risk_adjusted_excess_return">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">risk_adjusted_excess_return</tt><big>(</big><em>series</em>, <em>benchmark</em>, <em>rfr=0.0</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#risk_adjusted_excess_return"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.risk_adjusted_excess_return" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the MMRAP or the <a class="reference external" href="http://en.wikipedia.org/wiki/Modigliani_risk-adjusted_performance">Modigliani Risk Adjusted Performance</a> that
calculates the excess return from the <a class="reference external" href="http://en.wikipedia.org/wiki/Capital_allocation_line">Capital
Allocation Line</a>,
at the same level of risk (or volatility), specificaly,</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> from which to compare <tt class="docutils literal"><span class="pre">series</span></tt></p>
<p>rfr: <tt class="docutils literal"><span class="pre">float</span></tt> of the risk free rate</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of frequency, either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> 
<span class="pre">yearly</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">float</span></tt> of the risk adjusted excess performance</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating Risk Adjusted Excess Returns</p>
<div class="last math">
\[raer = r_p - \left(\textrm{SR}_b \cdot \sigma_p + r_f\right), \:
\textrm{where},\]\[\begin{split}r_p &amp;= \textrm{annualized linear return} \\
\textrm{SR}_b &amp;= \textrm{Sharpe Ratio of the benchmark} \\
\sigma_p &amp;= \textrm{volatility of the portfolio} \\
r_f &amp;= \textrm{Risk free rate}\end{split}\]</div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.risk_contribution">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">risk_contribution</tt><big>(</big><em>mctr_series</em>, <em>weight_series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#risk_contribution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.risk_contribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the risk contribution for each asset, given the marginal contribution
to risk (&#8220;mctr&#8221;) and the <tt class="docutils literal"><span class="pre">weight_series</span></tt> of asset weights</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">mctr_series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the marginal risk contribution</p>
<p>weight_series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of weights of each asset</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">a <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the risk contribution of each asset</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating Risk Contribution</p>
<p>If <span class="math">\(RC_i\)</span> is the Risk Contribution of asset <span class="math">\(i\)</span>, and 
<span class="math">\(\omega_i\)</span> is the weight of asset <span class="math">\(i\)</span>, then</p>
<div class="last math">
\[RC_i = mctr_i \cdot \omega_i\]</div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-meth docutils literal"><span class="pre">mctr()</span></tt> for Marginal Contribution to Risk (&#8220;mctr&#8221;) as well as
the <a class="reference external" href="http://bit.ly/1eGmxJG">Risk Contribution</a> paper from MSCI Barra</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.risk_contribution_as_proportion">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">risk_contribution_as_proportion</tt><big>(</big><em>mctr_series</em>, <em>weight_series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#risk_contribution_as_proportion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.risk_contribution_as_proportion" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the proprtion of the risk contribution for each asset, given the 
marginal contribution to risk (&#8220;mctr&#8221;) and the <tt class="docutils literal"><span class="pre">weight_series</span></tt> of asset
weights</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">mctr_series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the marginal risk contribution</p>
<p>weight_series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of weights of each asset</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">a <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the proportional risk contribution of each asset</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-meth docutils literal"><span class="pre">mctr()</span></tt> for Marginal Contribution to Risk (&#8220;mctr&#8221;) as well as
the <a class="reference external" href="http://bit.ly/1eGmxJG">Risk Contribution</a> paper from MSCI Barra</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.rolling_ui">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">rolling_ui</tt><big>(</big><em>series</em>, <em>window=21</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#rolling_ui"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.rolling_ui" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the rolling ulcer index over a series for a given <tt class="docutils literal"><span class="pre">window</span></tt>
(instead of the squared deviations from the mean).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>window: <tt class="docutils literal"><span class="pre">int</span></tt> of the size of the rolling window</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">pandas.Series</span></tt>: of the rolling ulcer index</p>
</td>
</tr>
</tbody>
</table>
<div class="code highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">visualize_wealth.performance</span> <span class="kn">as</span> <span class="nn">vwp</span>

<span class="n">ui</span> <span class="o">=</span> <span class="n">vwp</span><span class="o">.</span><span class="n">rolling_ui</span><span class="p">(</span><span class="n">price_series</span><span class="p">,</span> <span class="n">window</span> <span class="o">=</span> <span class="mi">252</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.sharpe_ratio">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">sharpe_ratio</tt><big>(</big><em>series</em>, <em>rfr=0.0</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#sharpe_ratio"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.sharpe_ratio" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <a class="reference external" href="http://en.wikipedia.org/wiki/Sharpe_ratio">Sharpe Ratio</a> of an 
asset, given a price series, risk free rate of <tt class="docutils literal"><span class="pre">rfr</span></tt>, and <tt class="docutils literal"><span class="pre">frequency</span></tt> of the 
time series</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>rfr: <tt class="docutils literal"><span class="pre">float</span></tt> of the risk free rate</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of frequency, either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> 
<span class="pre">yearly</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURN:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">float</span></tt> of the Sharpe Ratio</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating Sharpe</p>
<div class="last math">
\[\textrm{SR} = \frac{(R_p - r_f)}{\sigma} \: \textrm{where},\]\[\begin{split}R_p &amp;= \textrm{series annualized return} \\
r_f &amp;= \textrm{Risk free rate} \\
\sigma &amp;= \textrm{Portfolio annualized volatility}\end{split}\]</div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.sortino_ratio">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">sortino_ratio</tt><big>(</big><em>series</em>, <em>freq='daily'</em>, <em>rfr=0.0</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#sortino_ratio"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.sortino_ratio" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the <a class="reference external" href="http://en.wikipedia.org/wiki/Sortino_ratio">Sortino Ratio</a>, or
excess returns per unit downside volatility</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> <span class="pre">yearly</span></tt>    
indicating the frequency of the data <tt class="docutils literal"><span class="pre">default=</span></tt> daily</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">float of the Sortino Ratio</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating the Sortino Ratio</p>
<p>There are several calculation methodologies for the Sortino Ratio, this
method using downside volatility, where</p>
<div class="last math">
\[\textrm{Sortino Ratio} = \frac{(R-r_f)}{\sigma_\textrm{downside}}\]</div>
</div>
<div class="code highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">visualize_wealth.performance</span> <span class="kn">as</span> <span class="nn">vwp</span>

<span class="n">sortino_ratio</span> <span class="o">=</span> <span class="n">vwp</span><span class="o">.</span><span class="n">sortino_ratio</span><span class="p">(</span><span class="n">price_series</span><span class="p">,</span> <span class="n">frequency</span> <span class="o">=</span> <span class="s">&#39;monthly&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.systematic_as_proportion">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">systematic_as_proportion</tt><big>(</big><em>series</em>, <em>benchmark</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#systematic_as_proportion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.systematic_as_proportion" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the systematic risk as proportion of total volatility</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of frequency, either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> 
<span class="pre">yearly</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">float</span></tt> between (0, 1) representing the proportion of  volatility
represented by systematic risk</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.systematic_risk">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">systematic_risk</tt><big>(</big><em>series</em>, <em>benchmark</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#systematic_risk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.systematic_risk" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the systematic risk, or the volatility that is directly attributable
to the benchmark</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of frequency, either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> 
<span class="pre">yearly</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">float</span></tt> of the systematic volatility (not variance)</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating Systematic Risk</p>
<div class="last math">
\[\begin{split}\sigma_b &amp;= \textrm{Volatility of the Benchmark} \\
\sigma^2_{\beta} &amp;= \textrm{Systematic Risk} \\
\beta &amp;= \frac{\sigma^2_{s, b}}{\sigma^2_{b}} \: \textrm{then,}\end{split}\]\[\begin{split}\sigma^2_{\beta} &amp;= \beta^2 \cdot \sigma^2_{b}
\Rightarrow \sigma_{\beta} &amp;= \beta \cdot \sigma_{b}\end{split}\]</div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.test_funs">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">test_funs</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#test_funs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.test_funs" title="Permalink to this definition">¶</a></dt>
<dd><p>The testing function for <tt class="docutils literal"><span class="pre">analyze.py</span></tt></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas.util.testing</span> <span class="kn">as</span> <span class="nn">put</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">inspect</span><span class="o">,</span> <span class="nn">analyze</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s">&#39;../tests/test_analyze.xlsx&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">man_calcs</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;calcs&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prices</span> <span class="o">=</span> <span class="n">man_calcs</span><span class="p">[[</span><span class="s">&#39;S&amp;P 500&#39;</span><span class="p">,</span> <span class="s">&#39;VGTSX&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;results&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">put</span><span class="o">.</span><span class="n">assert_series_equal</span><span class="p">(</span><span class="n">man_calcs</span><span class="p">[</span><span class="s">&#39;S&amp;P 500 Log Ret&#39;</span><span class="p">],</span> 
<span class="gp">... </span>   <span class="n">log_returns</span><span class="p">(</span><span class="n">prices</span><span class="p">[</span><span class="s">&#39;S&amp;P 500&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">put</span><span class="o">.</span><span class="n">assert_series_equal</span><span class="p">(</span><span class="n">man_calcs</span><span class="p">[</span><span class="s">&#39;VGTSX Lin Ret&#39;</span><span class="p">],</span> 
<span class="gp">... </span>   <span class="n">linear_returns</span><span class="p">(</span><span class="n">prices</span><span class="p">[</span><span class="s">&#39;VGTSX&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">put</span><span class="o">.</span><span class="n">assert_series_equal</span><span class="p">(</span><span class="n">man_calcs</span><span class="p">[</span><span class="s">&#39;Active Return&#39;</span><span class="p">],</span>
<span class="gp">... </span>   <span class="n">analyze</span><span class="o">.</span><span class="n">active_returns</span><span class="p">(</span><span class="n">series</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="s">&#39;VGTSX&#39;</span><span class="p">],</span>
<span class="gp">... </span>   <span class="n">benchmark</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="s">&#39;S&amp;P 500&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<p>Cumulative Turnover Calculation</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">alloc_df</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;alloc_df&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alloc_df</span> <span class="o">=</span> <span class="n">alloc_df</span><span class="p">[</span><span class="n">alloc_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">alloc_df</span><span class="o">.</span><span class="n">columns</span><span class="o">!=</span><span class="s">&#39;Daily TO&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asset_wt_df</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;asset_wt_df&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_almost_equal</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">cumulative_turnover</span><span class="p">(</span><span class="n">alloc_df</span><span class="p">,</span> <span class="n">asset_wt_df</span><span class="p">),</span> 
<span class="gp">... </span>   <span class="n">stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;cumulative_turnover&#39;</span><span class="p">,</span> <span class="s">&#39;S&amp;P 500&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>marginal contributions to risk and risk contribution calcs</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mctr_prices</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;mctr&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mctr_manual</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;mctr_results&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;BSV&#39;</span><span class="p">,</span><span class="s">&#39;VBK&#39;</span><span class="p">,</span><span class="s">&#39;VBR&#39;</span><span class="p">,</span><span class="s">&#39;VOE&#39;</span><span class="p">,</span><span class="s">&#39;VOT&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mctr</span> <span class="o">=</span> <span class="n">mctr</span><span class="p">(</span><span class="n">mctr_prices</span><span class="p">[</span><span class="n">cols</span><span class="p">],</span> <span class="n">mctr_prices</span><span class="p">[</span><span class="s">&#39;Portfolio&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">put</span><span class="o">.</span><span class="n">assert_series_equal</span><span class="p">(</span><span class="n">mctr</span><span class="p">,</span> <span class="n">mctr_manual</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;mctr&#39;</span><span class="p">,</span> <span class="n">cols</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weights</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span> <span class="p">[</span><span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="o">.</span><span class="mi">2</span><span class="p">],</span> <span class="n">index</span> <span class="o">=</span> <span class="n">cols</span><span class="p">,</span> 
<span class="gp">... </span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;risk_contribution&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">put</span><span class="o">.</span><span class="n">assert_series_equal</span><span class="p">(</span><span class="n">risk_contribution</span><span class="p">(</span><span class="n">mctr</span><span class="p">,</span> <span class="n">weights</span><span class="p">),</span> 
<span class="gp">... </span><span class="n">mctr_manual</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;risk_contribution&#39;</span><span class="p">,</span> <span class="p">:])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">put</span><span class="o">.</span><span class="n">assert_series_equal</span><span class="p">(</span><span class="n">risk_contribution_as_proportion</span><span class="p">(</span><span class="n">mctr</span><span class="p">,</span> <span class="n">weights</span><span class="p">),</span>
<span class="gp">... </span><span class="n">mctr_manual</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;risk_contribution_as_proportion&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>These functions are already calculated or aren&#8217;t calculated in the spreadsheet</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">no_calc_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;rolling_ui&#39;</span><span class="p">,</span> <span class="s">&#39;active_returns&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s">&#39;test_funs&#39;</span><span class="p">,</span> <span class="s">&#39;linear_returns&#39;</span><span class="p">,</span> <span class="s">&#39;log_returns&#39;</span><span class="p">,</span> <span class="s">&#39;generate_all_metrics&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s">&#39;return_by_year&#39;</span><span class="p">,</span> <span class="s">&#39;cumulative_turnover&#39;</span><span class="p">,</span> <span class="s">&#39;mctr&#39;</span><span class="p">,</span> <span class="s">&#39;risk_contribution&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s">&#39;risk_contribution_as_proportion&#39;</span><span class="p">,</span> <span class="s">&#39;cvar_cf_ew&#39;</span><span class="p">,</span> <span class="s">&#39;cvar_median_np&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s">&#39;cvar_mu_np&#39;</span><span class="p">,</span> <span class="s">&#39;var_np&#39;</span><span class="p">,</span> <span class="s">&#39;var_cf&#39;</span><span class="p">,</span> <span class="s">&#39;var_norm&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;series&#39;</span><span class="p">:</span> <span class="n">prices</span><span class="p">[</span><span class="s">&#39;VGTSX&#39;</span><span class="p">],</span> <span class="s">&#39;benchmark&#39;</span><span class="p">:</span><span class="n">prices</span><span class="p">[</span><span class="s">&#39;S&amp;P 500&#39;</span><span class="p">],</span> 
<span class="gp">... </span>   <span class="s">&#39;freq&#39;</span><span class="p">:</span> <span class="s">&#39;daily&#39;</span><span class="p">,</span> <span class="s">&#39;rfr&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s">&#39;p&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mo">01</span> <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">funs</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="n">analyze</span><span class="p">,</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isfunction</span><span class="p">)</span>
</pre></div>
</div>
<p>Instead of writing out each function, I use the <tt class="docutils literal"><span class="pre">inspect</span> <span class="pre">module</span></tt> to determine
Function names, and number of args.  Because the names of the functions are
the same as the statistic in the <tt class="docutils literal"><span class="pre">results</span></tt> tab of
<tt class="docutils literal"><span class="pre">../tests/test_analyze.xlsx</span></tt> I can use those key values to both call the
function and reference the manually calculated value in the <tt class="docutils literal"><span class="pre">stats</span></tt> frame.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">trus</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">fun</span> <span class="ow">in</span> <span class="n">funs</span><span class="p">:</span>
<span class="gp">... </span>   <span class="k">if</span> <span class="p">(</span><span class="n">fun</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fun</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">no_calc_list</span><span class="p">):</span>
<span class="gp">... </span>       <span class="n">arg_list</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getargspec</span><span class="p">(</span><span class="n">fun</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">args</span>
<span class="gp">... </span>       <span class="n">in_vals</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">d</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arg_list</span><span class="p">])</span>
<span class="gp">... </span>       <span class="n">numpy</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_almost_equal</span><span class="p">(</span><span class="n">fun</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="o">*</span><span class="n">in_vals</span><span class="p">),</span>
<span class="gp">... </span>                                 <span class="n">stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fun</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;VGTSX&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.tracking_error">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">tracking_error</tt><big>(</big><em>series</em>, <em>benchmark</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#tracking_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.tracking_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <tt class="docutils literal"><span class="pre">float</span></tt> of the <a class="reference external" href="http://en.wikipedia.org/wiki/Tracking_error">Tracking Error</a> or standard deviation of the 
active returns</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of frequency, either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> 
<span class="pre">yearly</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">float</span></tt> of the tracking error</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Calculating Tracking Error</p>
<p>Let <span class="math">\(r_{a_i} =\)</span> &#8220;Active Return&#8221; for period <span class="math">\(i\)</span>, to calculate the
compound linear difference between <span class="math">\(r_s\)</span> and <span class="math">\(r_b\)</span> is,</p>
<div class="last math">
\[r_{a_i} = \frac{(1+r_{s_i})}{(1+r_{b_i})}-1\]\[\begin{split}\textrm{then, } \textrm{TE} &amp;= \sigma_a \cdot \sqrt{k} \\
k &amp;= \textrm{Annualization factor}\end{split}\]</div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.ulcer_index">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">ulcer_index</tt><big>(</big><em>series</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#ulcer_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.ulcer_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the ulcer index of  the series, which is defined as the squared drawdowns
(instead of the squared deviations from the mean).  Further explanation can be 
found at <a class="reference external" href="http://www.tangotools.com/ui/ui.htm">Tanger Tools</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">float:</th><td class="field-body">the maximum drawdown of the period, expressed as a positive number</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<div class="code highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">visualize_wealth.performance</span> <span class="kn">as</span> <span class="nn">vwp</span>

<span class="n">ui</span> <span class="o">=</span> <span class="n">vwp</span><span class="o">.</span><span class="n">ulcer_index</span><span class="p">(</span><span class="n">price_series</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.upcapture">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">upcapture</tt><big>(</big><em>series</em>, <em>benchmark</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#upcapture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.upcapture" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the proportion of <tt class="docutils literal"><span class="pre">series</span></tt>&#8216;s cumulative positive returns to
<tt class="docutils literal"><span class="pre">benchmark</span></tt>&#8216;s cumulative  returns, given benchmark&#8217;s returns were positive 
in that period</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>benchmark: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of prices to compare <tt class="docutils literal"><span class="pre">series</span></tt> against</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">float: of the upcapture of cumulative positive returns</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-data docutils literal"><span class="pre">median_upcature(series,</span> <span class="pre">benchmark)</span></tt></p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.upside_deviation">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">upside_deviation</tt><big>(</big><em>series</em>, <em>freq='daily'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#upside_deviation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.upside_deviation" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the volatility of the returns that are greater than zero</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>freq: <tt class="docutils literal"><span class="pre">str</span></tt> of frequency, either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> 
<span class="pre">yearly</span></tt></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">float</span></tt> of the upside standard deviation</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.var_cf">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">var_cf</tt><big>(</big><em>series</em>, <em>p=0.01</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#var_cf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.var_cf" title="Permalink to this definition">¶</a></dt>
<dd><p>VaR (Value at Risk), using the <a class="reference external" href="http://en.wikipedia.org/wiki/Cornish%E2%80%93Fisher_expansion">Cornish Fisher Approximation</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of prices</p>
<p>p: <tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> of the <span class="math">\(\alpha\)</span> percentile</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of the VaR, where skew and
kurtosis are used to adjust the tail density estimation (using the
Cornish Fisher Approximation)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.var_norm">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">var_norm</tt><big>(</big><em>series</em>, <em>p=0.01</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#var_norm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.var_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Value at Risk (&#8220;VaR&#8221;) of the <span class="math">\(p = \alpha\)</span> quantile, defines the loss,
such that there is an <span class="math">\(\alpha\)</span> percent chance of a loss, greater than or
equal to <span class="math">\(\textrm{VaR}_\alpha\)</span>. <tt class="xref py py-meth docutils literal"><span class="pre">var_norm()</span></tt> fits a normal
distribution to the log returns of the series, and then estimates the
<span class="math">\(\textrm{VaR}_\alpha\)</span></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> of prices</p>
<p>p: <tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> of the <span class="math">\(\alpha\)</span> quantile for which to estimate VaR</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">float</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> of VaR</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Derivation of Value at Risk</p>
<div class="last math">
\[\begin{split}Let Y \sim N(\mu, \sigma^2) \textrm{, we choose } y_\alpha
\textrm{ such that}
\mathbb{P}(Y &lt; y_\alpha) = \alpha,
\textrm{Then,} \\\end{split}\]\[\begin{split}\mathbb{P}(Y &lt; y_\alpha) &amp;= \alpha \\
\Rightarrow \mathbb{P}(\frac{Y - \mu}{\sigma} &lt; \frac{y_\alpha -
\mu}{\sigma}) &amp;= \alpha \\
\Rightarrow \mathbb{P}(Z &lt; \frac{y_\alpha - \mu}{\sigma} &amp;= \alpha
\\
\Rightarrow \Phi(\frac{y_\alpha - \mu}{\sigma} ) &amp;= \alpha,
\textrm{ where}
\\
\Phi(.) \textrm{ is the standard normal cdf operator.
Then using the inverse of the function } \Phi
\textrm{ , we have:} \\\end{split}\]\[\begin{split}\Phi^{-1}( \Phi(\frac{y_\alpha - \mu}{\sigma} ) ) &amp;=
\Phi^{-1}(\alpha) \\
\Rightarrow \Phi^{-1}(\alpha)\cdot\sigma + \mu = y_\alpha
\textrm{, but }
y_\alpha \textrm{ is negative and VaR is always positive, so,} \\\end{split}\]\[\begin{split}VaR_\alpha = -y_\alpha &amp;= -\Phi^{-1}(\alpha)\cdot\sigma - \mu
\\
&amp;= \Phi^{-1}(1 - \alpha) - \mu \\\end{split}\]</div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">:meth:var_cf :meth:var_np</p>
</div>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.analyze.var_np">
<tt class="descclassname">visualize_wealth.analyze.</tt><tt class="descname">var_np</tt><big>(</big><em>series</em>, <em>p=0.01</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/analyze.html#var_np"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.analyze.var_np" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the non-parametric VaR (non-parametric estimate) for a given percentile,
i.e. the loss for which there is less than a <tt class="docutils literal"><span class="pre">percentile</span></tt> chance of exceeding
in a period of <cite>freq</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">series: <tt class="docutils literal"><span class="pre">pandas.Series</span></tt> of prices</p>
<p>freq:<tt class="docutils literal"><span class="pre">str</span></tt> of either <tt class="docutils literal"><span class="pre">daily,</span> <span class="pre">monthly,</span> <span class="pre">quarterly,</span> <span class="pre">or</span> <span class="pre">yearly</span></tt>    
indicating the frequency of the data <tt class="docutils literal"><span class="pre">default</span> <span class="pre">=</span> <span class="pre">daily</span></tt></p>
<p>percentile: <tt class="docutils literal"><span class="pre">float</span></tt> of the percentile at which to calculate VaR</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last">float of the Value at Risk given a <tt class="docutils literal"><span class="pre">percentile</span></tt></p>
</td>
</tr>
</tbody>
</table>
<div class="code highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">visualize_wealth.performance</span> <span class="kn">as</span> <span class="nn">vwp</span>

<span class="n">var</span> <span class="o">=</span> <span class="n">vwp</span><span class="o">.</span><span class="n">value_at_risk</span><span class="p">(</span><span class="n">price_series</span><span class="p">,</span> <span class="n">frequency</span> <span class="o">=</span> <span class="s">&#39;monthly&#39;</span><span class="p">,</span> <span class="n">percentile</span> <span class="o">=</span>
<span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="utils-py-documentation">
<span id="utils-documentation"></span><h2><tt class="docutils literal"><span class="pre">utils.py</span></tt> documentation<a class="headerlink" href="#utils-py-documentation" title="Permalink to this headline">¶</a></h2>
<p>Full documentation for each of the functions of <tt class="xref py py-mod docutils literal"><span class="pre">utils</span></tt></p>
<span class="target" id="module-visualize_wealth.utils"></span><span class="target" id="module-utils.py"></span><dl class="function">
<dt id="visualize_wealth.utils.first_valid_date">
<tt class="descclassname">visualize_wealth.utils.</tt><tt class="descname">first_valid_date</tt><big>(</big><em>prices</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/utils.html#first_valid_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.utils.first_valid_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to determine the first valid date from a set of 
different prices Can take either a <a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a> of 
<tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame`s</span> <span class="pre">where</span> <span class="pre">each</span> <span class="pre">key</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">ticker's</span> <span class="pre">'Open',</span> 
<span class="pre">'High',</span> <span class="pre">'Low',</span> <span class="pre">'Close',</span> <span class="pre">'Adj</span> <span class="pre">Close'</span> <span class="pre">or</span> <span class="pre">a</span> <span class="pre">single</span> 
<span class="pre">:class:`pandas.DataFrame</span></tt> where each column is a different ticker</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">prices: either <tt class="xref py py-class docutils literal"><span class="pre">dictionary</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt></td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><tt class="xref py py-class docutils literal"><span class="pre">pandas.Timestamp</span></tt></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.utils.normalized_price">
<tt class="descclassname">visualize_wealth.utils.</tt><tt class="descname">normalized_price</tt><big>(</big><em>price_df</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/utils.html#normalized_price"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.utils.normalized_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the normalized price of a series</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body">price_df: <tt class="xref py py-class docutils literal"><span class="pre">pandas.Series</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt></td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body">same as the input</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.utils.tickers_to_dict">
<tt class="descclassname">visualize_wealth.utils.</tt><tt class="descname">tickers_to_dict</tt><big>(</big><em>ticker_list</em>, <em>api='yahoo'</em>, <em>start='01/01/1990'</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/utils.html#tickers_to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.utils.tickers_to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function to return ticker data where the input is either a 
ticker, or a list of tickers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">ticker_list: <tt class="xref py py-class docutils literal"><span class="pre">list</span></tt> in the case of multiple tickers or 
<tt class="xref py py-class docutils literal"><span class="pre">str</span></tt> in the case of one ticker</p>
<p>api: <tt class="xref py py-class docutils literal"><span class="pre">string</span></tt> identifying which api to call the data 
from.  Either &#8216;yahoo&#8217; or &#8216;google&#8217;</p>
<p>start: <tt class="xref py py-class docutils literal"><span class="pre">string</span></tt> of the desired start date</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RETURNS:</th><td class="field-body"><p class="first last"><tt class="xref py py-class docutils literal"><span class="pre">dictionary</span></tt> of (ticker, price_df) mappings or a
<tt class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></tt> when the <tt class="docutils literal"><span class="pre">ticker_list</span></tt> is 
<tt class="xref py py-class docutils literal"><span class="pre">str</span></tt></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="visualize_wealth.utils.zipped_time_chunks">
<tt class="descclassname">visualize_wealth.utils.</tt><tt class="descname">zipped_time_chunks</tt><big>(</big><em>index</em>, <em>interval</em><big>)</big><a class="reference internal" href="_modules/visualize_wealth/utils.html#zipped_time_chunks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visualize_wealth.utils.zipped_time_chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Given different period intervals, return a zipped list of tuples
of length &#8216;period_interval&#8217;, containing only full periods</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The function assumes indexes are of &#8216;daily_frequency&#8217;</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ARGS:</th><td class="field-body"><p class="first">index: <tt class="xref py py-class docutils literal"><span class="pre">pandas.DatetimeIndex</span></tt></p>
<p class="last">per_interval: <tt class="xref py py-class docutils literal"><span class="pre">string</span></tt> either &#8216;monthly&#8217;, &#8216;quarterly&#8217;,
or &#8216;yearly&#8217;</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="sphinx-customizations">
<h2>Sphinx Customizations<a class="headerlink" href="#sphinx-customizations" title="Permalink to this headline">¶</a></h2>
<p>The documentation for this module was created using <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a>. I keep a couple of commands here that I
use when re-committing to <a class="reference external" href="http://www.github.com">GitHub</a>, or
regenerating the documentation.  It serves
as reference for myself, but in case other people might find it useful
I&#8217;ve posted that as well</p>
<div class="section" id="convert-readme-md-to-rst-format">
<span id="convert-markdown-to-rst"></span><h3>Convert <cite>README.md</cite> to <cite>.rst</cite> format<a class="headerlink" href="#convert-readme-md-to-rst-format" title="Permalink to this headline">¶</a></h3>
<p>I use <a class="reference external" href="http://johnmacfarlane.net/pandoc/">Pandoc</a> to convert my
<a class="reference external" href="./readme.html">README</a> (that&#8217;s in Markdown format) into <tt class="docutils literal"><span class="pre">.rst</span></tt> format (that
can be interepreted by Sphinx).</p>
<div class="code bash highlight-python"><div class="highlight"><pre>$ cd visualize_wealth
$ pandoc README.md -f markdown -t rst -o docs/source/readme.rst
</pre></div>
</div>
</div>
<div class="section" id="build-sphinx-documentation">
<span id="id15"></span><h3>Build Sphinx Documentation<a class="headerlink" href="#build-sphinx-documentation" title="Permalink to this headline">¶</a></h3>
<div class="code bash highlight-python"><div class="highlight"><pre>#rebuild the package
$ cd visualize_wealth
$ python setup.py install

#rebuild the documentation
$ sphinx-build -b html docs/source/ docs/build/
</pre></div>
</div>
</div>
<div class="section" id="sphinx-customizations-in-conf-py">
<span id="id16"></span><h3>Sphinx Customizations in <tt class="docutils literal"><span class="pre">conf.py</span></tt><a class="headerlink" href="#sphinx-customizations-in-conf-py" title="Permalink to this headline">¶</a></h3>
<p>Current customizations I use in order to make the docs look like they
currently do</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c">#use the sphinxdoc theme</span>
<span class="n">html_theme</span> <span class="o">=</span> <span class="s">&#39;sphinxdoc&#39;</span>

<span class="c">#enable todos</span>
<span class="n">todo_include_todos</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;sphinx.ext.autodoc&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">,</span> <span class="s">&#39;sphinx.ext.todo&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="readme.html" title="README.md"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Be the Change"
             >previous</a> |</li>
        <li><a href="index.html">Visualize Wealth 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Benjamin M. Gross.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>